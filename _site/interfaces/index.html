<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Interfaces for TPEN</title>
    <link rel="stylesheet" href="/css/style.css">
  </head>
  <body>
    <nav>
      <a href="/">Home</a>
    </nav>
    <h1>Interfaces for TPEN</h1>
    <section>
      <p>This page is intended for developers and designers who are building interfaces for
use with the TPEN services at t‑pen.org. The following classes are available for you
to use with the interfaces library for more easily accessing the services API in
your javaScript project.</p>

<h2 id="tpen">TPEN</h2>

<p>The TPEN class is the main class for accessing the TPEN services API. It is used to
initialize the TPEN object and to make calls to the API.</p>

<h3 id="constructor">Constructor</h3>

<p>The constructor for the TPEN class is used to initialize the TPEN object.
It takes an optional parameter for the URL to the Tiny Things RERUM proxy you are using
with your applications API key, defaulting to “<a href="https://tiny.t-pen.org">https://tiny.t‑pen.org</a>”.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">tpen</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TPEN</span><span class="p">(</span><span class="nx">tinyThingsURL</span><span class="p">?)</span>
</code></pre></div></div>

<h3 id="properties">Properties</h3>

<p>The TPEN class has the following properties:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">tinyThingsURL</code>: The URL to the Tiny Things RERUM proxy you are using with your applications API key.</li>
  <li><code class="language-plaintext highlighter-rouge">servicesURL</code>: The URL to the TPEN services API, default to “<a href="https://api.t-pen.org">https://api.t‑pen.org</a>”.</li>
  <li><code class="language-plaintext highlighter-rouge">currentUser</code>: The currently authenticated User, if any.</li>
  <li><code class="language-plaintext highlighter-rouge">activeProject</code>: The currently active Project, if any.</li>
  <li><code class="language-plaintext highlighter-rouge">activeCollection</code>: The currently active Collection, if any.</li>
</ul>

<h3 id="methods">Methods</h3>

<p>The TPEN class has the following methods:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">reset()</code>: Resets the TPEN object to its initial state.</li>
  <li><code class="language-plaintext highlighter-rouge">getUser()</code>: Returns the currently authenticated User, if any.</li>
  <li><code class="language-plaintext highlighter-rouge">getProject()</code>: Returns the currently active Project, if any.</li>
  <li><code class="language-plaintext highlighter-rouge">getCollection()</code>: Returns the currently active Collection, if any.</li>
  <li><code class="language-plaintext highlighter-rouge">getProjects()</code>: Returns a list of all the Projects the current user has access to.</li>
  <li><code class="language-plaintext highlighter-rouge">createProject(data)</code>: TODO</li>
  <li><code class="language-plaintext highlighter-rouge">createUser(data)</code>: TODO</li>
  <li><code class="language-plaintext highlighter-rouge">createGroup(data)</code>: TODO</li>
</ul>

<h2 id="user">User</h2>

<p>The User class is used to represent an authenticated TPEN user. Interfaces in TPEN will often need details about the currently authenticated user as well as simple information about the users referenced as contributors, group members, etc.</p>

<h3 id="constructor-1">Constructor</h3>

<p>The constructor for the User class is used to initialize the User object with an identifier unique among users.</p>

<p>An <code class="language-plaintext highlighter-rouge">idString</code> will be one of the following:</p>

<ul>
  <li>A string that is a valid <code class="language-plaintext highlighter-rouge">_id</code> hexString from the private TPEN database</li>
  <li>A string that is a valid URI for the public Agent stored in RERUM or compatible repository</li>
  <li>The string (‘any’) to represent any authenticated User</li>
  <li>The string (‘anonymous’) to create an instance of a public User</li>
</ul>

<p>If you are using the TPEN Authentication system, a logged in User will be available as <code class="language-plaintext highlighter-rouge">TPEN.currentUser</code>, which will include
an authentication token you may pass to the API.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="p">(</span><span class="nx">idString</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="properties-1">Properties</h3>

<p>The User class may have the following properties:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">id</code>: The unique identifier for the user.</li>
  <li><code class="language-plaintext highlighter-rouge">authenticationToken</code>: The authentication token for the user.</li>
  <li><code class="language-plaintext highlighter-rouge">agent</code>: The Agent URI for the user.</li>
  <li><code class="language-plaintext highlighter-rouge">displayName</code>: The name of the user intended for onscreen display in TPEN.</li>
  <li><code class="language-plaintext highlighter-rouge">roles</code>: The roles for the user related to the <code class="language-plaintext highlighter-rouge">currentProject</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">permissions</code>: The permissions for the user related to the <code class="language-plaintext highlighter-rouge">currentProject</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">profile</code>: An object containing all profile information the User identified as publicly available. Some examples of values that may be made public include:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">profile.name</code>: The full name of the user intended for the public.</li>
      <li><code class="language-plaintext highlighter-rouge">profile.mbox</code>: The email address of the user.</li>
      <li><code class="language-plaintext highlighter-rouge">profile.avatar</code>: The URL to the user’s avatar image.</li>
      <li><code class="language-plaintext highlighter-rouge">profile.website</code>: The URL to the user’s website.</li>
      <li><code class="language-plaintext highlighter-rouge">profile.identities</code>: An array of URIs containing all identities the user has.</li>
      <li><code class="language-plaintext highlighter-rouge">profile.links</code>: An array of URIs containing all links related to this user.</li>
    </ul>
  </li>
</ul>

<h3 id="methods-1">Methods</h3>

<p>The User class has the following methods:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">getProfile()</code>: Returns the profile information for the user.</li>
  <li><code class="language-plaintext highlighter-rouge">getProjects()</code>: Returns a list of all the Projects the user has access to.</li>
  <li><code class="language-plaintext highlighter-rouge">logout()</code>: Logs the user out of the current session.</li>
  <li><code class="language-plaintext highlighter-rouge">updateProfile()</code>: Updates the profile information for the <code class="language-plaintext highlighter-rouge">currentUser</code>. New keys are added and any keys set to <code class="language-plaintext highlighter-rouge">null</code> will be removed.</li>
</ul>

<h3 id="implementation-notes">Implementation Notes</h3>

<p>The permissions for a User are controlled by the Project. Changing the active Project will update the permissions for the authenticated User and reset all the group members. The <code class="language-plaintext highlighter-rouge">currentUser</code> is only changed by authentication and cannot be programmatically switched in an Interface.</p>

<h2 id="project">Project</h2>

<p>The Project class is used to represent a TPEN Project. A single User may have access to multiple Projects. Projects may be clustered together into Collections. Only one Project may be active at a time. If your Interface requires multiple projects active, they must be individually scoped.</p>

<h3 id="constructor-2">Constructor</h3>

<p>The constructor for the Project class is used to initialize the Project object with an identifier unique among projects.</p>

<p>An <code class="language-plaintext highlighter-rouge">idString</code> will be one of the following:</p>

<ul>
  <li>A string that is a valid <code class="language-plaintext highlighter-rouge">_id</code> hexString from the private TPEN database</li>
  <li>A string that is a valid URI for the public Project stored in RERUM or compatible repository</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">project</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Project</span><span class="p">(</span><span class="nx">idString</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="properties-2">Properties</h3>

<p>The Project class may have the following properties:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">id</code>: The unique identifier for the project.</li>
  <li><code class="language-plaintext highlighter-rouge">title</code>: The label intended for human interfaces.</li>
  <li><code class="language-plaintext highlighter-rouge">manifest</code>: The URI of the manifest this was originally based on.</li>
  <li><code class="language-plaintext highlighter-rouge">viewer</code>: The URL of a readonly viewer Interface registered with this project.</li>
  <li><code class="language-plaintext highlighter-rouge">annotator</code>: The URL of the default annotation Interface used for transcription or other annotation.</li>
  <li><code class="language-plaintext highlighter-rouge">creator</code>: The Agent URI of the Project’s creator.</li>
  <li><code class="language-plaintext highlighter-rouge">group</code>: The <code class="language-plaintext highlighter-rouge">id</code> for the group of contributors with access to this Project</li>
  <li><code class="language-plaintext highlighter-rouge">license</code>: A reference or link to the license for this project.</li>
  <li><code class="language-plaintext highlighter-rouge">tags</code>: An array of strings containing the tags for this project.</li>
  <li><code class="language-plaintext highlighter-rouge">tools</code>: An array of related tools as URLs.</li>
  <li><code class="language-plaintext highlighter-rouge">options</code>: A flexible configuration object for this project.</li>
</ul>

<h3 id="methods-2">Methods</h3>

<p>The Project class has the following methods:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">getCollections()</code>: Returns a list of all the Collections that contain this project.</li>
  <li><code class="language-plaintext highlighter-rouge">delete()</code>: Marks the Project for deletion.</li>
  <li><code class="language-plaintext highlighter-rouge">update(data)</code>: Updates the project with the specified data. New keys will be added, any keys set to <code class="language-plaintext highlighter-rouge">null</code> will be removed. Some keys are immutable.</li>
  <li><code class="language-plaintext highlighter-rouge">misc()</code>: more methods for simple changing of single properties TODO</li>
</ul>

<h3 id="implementation-notes-1">Implementation Notes</h3>

<p>The available information for any Project may be limited to that User’s role within it.
While all Projects will have at least an <code class="language-plaintext highlighter-rouge">id</code>, <code class="language-plaintext highlighter-rouge">creator</code>, <code class="language-plaintext highlighter-rouge">members</code>, and <code class="language-plaintext highlighter-rouge">license</code>, changing the currentUser may change available Project properties.</p>

<h2 id="group">Group</h2>

<p>The Group class is used to represent a TPEN Group. A single Group may control multiple Projects or a Collections. Be cautious when changing membership, roles, or permissions, as it may impact other projects.</p>

<h3 id="constructor-3">Constructor</h3>

<p>The constructor for the Group class is used to initialize the Group object with an identifier unique among groups. There is only one Group available at a time, and it is always the <code class="language-plaintext highlighter-rouge">currentGroup</code>, initialized when <code class="language-plaintext highlighter-rouge">activeProject</code> is set.</p>

<h3 id="properties-3">Properties</h3>

<p>The Group class may have the following properties:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">id</code>: The unique identifier for the group.</li>
  <li><code class="language-plaintext highlighter-rouge">slug</code>: A slugified string to reference the group.</li>
  <li><code class="language-plaintext highlighter-rouge">label</code>: A human‑readable name for the Group in displays.</li>
  <li><code class="language-plaintext highlighter-rouge">members</code>: An array of Users that have access to this project.</li>
  <li><code class="language-plaintext highlighter-rouge">roles</code>: An array of role objects and thier permissions.</li>
  <li><code class="language-plaintext highlighter-rouge">options</code>: A flexible configuration object, setting new Project settings in this Group.</li>
  <li><code class="language-plaintext highlighter-rouge">tags</code>: An array of strings containing the tags.</li>
</ul>

<h3 id="methods-3">Methods</h3>

<p>The Group class has the following methods:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">getMembers()</code>: Returns a list of all the Users that have access to this project.</li>
  <li><code class="language-plaintext highlighter-rouge">getProjects()</code>: Returns a list of all the Projects that belong to this group.</li>
  <li><code class="language-plaintext highlighter-rouge">removeMember(user)</code>: Removes the specified User from this project.</li>
  <li><code class="language-plaintext highlighter-rouge">addMember(user)</code>: Adds the specified User to this project.</li>
  <li><code class="language-plaintext highlighter-rouge">modifyRole(user, role)</code>: Modifies the role for the specified User.</li>
  <li><code class="language-plaintext highlighter-rouge">inviteMember(email)</code>: Invites the specified email address to join this project.</li>
  <li><code class="language-plaintext highlighter-rouge">update(data)</code>: Updates the group with the specified data. New keys will be added, any keys set to <code class="language-plaintext highlighter-rouge">null</code> will be removed. Some keys are immutable.</li>
  <li><code class="language-plaintext highlighter-rouge">fork()</code>: Creates a new Group with the same members and roles.</li>
</ul>

<h3 id="implementation-notes-2">Implementation Notes</h3>

<p>Any changes to a Group may impact other Projects controlled by this group. If this is not
intended, be sure to fork the group first so that changes are limited to the current project.</p>

    </section>
    <footer>
      &copy; 2024
    </footer>
  </body>
</html>
